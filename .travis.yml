language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: qnGbo5nu0VvaNaW56Fsivdy/35kc5YPSsEybaRXWtwJ9DG/6v4Rl9LwNX0bC3t6jsMGb58U/dhLv15ifAuWsRSKGojFsbPfCXtJNVpUavJKfAsYlquMS60qFCd9Rqw3Pu4bYNtG8TyQ8QkEVhd4lGmJ9otij8w6W2UUt0qEOJoKBvot7FZx2PoFg87+375WA4N05RY2CqXkF4Ov0phYNVXLpAyF15kDCQDUm2n7yXdAP3aPr+SAlTahwAwHb9jYlXdiXM6PhkeLO92BstVBIqC+h1DD7rbfV3uenka0LETo2MQ1/d6kefHQ0ZMTmiPf3K8ycnPkUs9jsLQmyZDj5HS0FfBNIGr8psfeZQYY0mfB8PA1UqDHR93zYZmNYA9vdqYCSGK6BFK5e2QPkvqEDnpU6BWcpae5Ka1Ftn91HHW/7dxcAv15wbNaZhvLe5m4tgxWE9sAC5odz+iBBWt7y1EwAZgFtz2RPwaJiwI7cgoz1CXpPgRIZmiGfSDnQTD9M/QjnpDzvXLclW7Uxiu8MlUxbeB7S7mzoRwwMi6SncGxn8ti1H8nPaWh0iFxxbk7x2gkjECVuBBo+5ccO4PPRRVl2+GolzaToqNZVKB0R2xkIu14152EMke+Gu7HC3nlZVHuk2Vj4ACK9qx/h22lBx4dZ7J3oZoWUM89lkO+qAog=
  password:
    secure: BLRyGvdfxTpy9hLLQ/WiOmweoLJ/oxa10oS+NIi5wnVbeIF0Etvjresq7tPhihhP0EnIFkAH4LTPzw+85YVM1bZVILkPSaSjTTpiTQBr0SRpXy94hzad0ckREuANUGgylmoU8vcHAW6TuHh3fWeL8zwTob5mhSMBV0WZ4YOfhNq25h5RKBAGjwxiHFXKgK4kOq+lhSJN0a7Q5swDszTaea8Qt3iU6NF9LsRM//0LKXfbxT83XTpd+m7vymC5JG2aPgKPloZHiF3C0jhTEvVBqmYTdM3wVwny5YQqS9FS61GTmo6nAaAaEqvs1k+qS/rqNGlmGyNaF3woPFxLrVYNmDzweB91iineqz/QKdHVRpFEc9tHKG+qc243cg609XC4cIqrGoOH/bUP7mvJ6NyDw6cuIqhA7/R3gu90YuesC3ypW3HAparbQpzE9yN0mwV5wr6N34QuwEslG8t8mEh52c+UHRJ13875HyQv0X6Z7gw5HcW2+4Ov1Sbwe5CGoq6wjleIRfC/7VVbJPD3oU+b8P2qOE0YV35VCnIVrs6dCTBf+t4CTRQo46kIyGpuxtBAhXv4JjqxYuy2RVW9v4CLXqooXmUS+Vvmqlzan8vMixcmm7/8gkvHD1CNtmre0tyXYl0uKwLJqTDgGK8KJSzi4MtQKnraHPFX9Zs2tTpWn+I=
