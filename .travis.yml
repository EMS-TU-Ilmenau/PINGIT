language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: ZYzRZ8W9Fdahe4qRCVuenizbT41/0WQv2cGZ+6IqWp5DgJF+1yJXtIH/BPS8Q/PoifhPgImRe2PbkwIKGtfhOlIN0lVlYPHvI3r4y6AdIi5f1ZIPTG9MbOeUdcKegwqnNRGbcbiyy0U/AJsJ6YzBRmpKCqbSXX2SscyvMr+BBkq6+VubiK2xIYUHtk9Qz8QPoPx8w01tL7qvfcrlBaLKDqRZvu3Uy1rjOaKdXiwcnHJKvUXxtOfDgQDaUqPFYC+9H3UGKNg5gc/TGN8n9p9bLSVhRLkfjcicw0NNUpzCB9RlIts2FxCvRcLJ5+iX2w/kqBW0iDUpKY0US/F22aP1jJ1uI5A7YVSLmzi8ULfQ75OMEUiYgY9ZVLWIdy2seCsNncQPj3an7pLLQZdzsGwLRdozORws0MD8CJSg1xoj4/rMxhsbSXdxuIvXSaTiVOeCxt77/N/WpZoRR8/RT6ep7nNRIUCnejI5sSz9mX4Z2Pl9pW9//JeRAQ+3RQ9C0avjYsuPZlBwcH+uW9PprMCSWFN4hW1MFVsq9TRFnrM7IaMUe+hBp4QVAOfmBYSeaZQoL7ri57C6SSIxgz7/7Rb5kvO4hjS+BxODBFvbyKlOVFXUKQm5LNlgZyU9eyKczvl34UcnEkvMKXmETiA2bwRVILWk4SzPKRqJg1uUPJ+IrmY=
  password:
    secure: VFaivdaV94YTc5ngWI8fRjILR/NDQa9eROWvdVAP7Vj1pWDMswvgfQkulPxA/EStMAzoIO+06pOMIfXokg2IM7CyX1vEMRIJfNiwvjkLsS8qq18BLPgclO8GHXOg0GHGtAiBzhJONnKECm+FDi3+HaohN9zwWtlrMRgz3QQAx+KlUHL9VHLkbpjRb7Fy0mrdGBBUOeUTPplizR76dMH8Vr69cZWAIdvnHwhlilQ4ZZNJZM0BOTpCKP7kRaNyL+jjCdJVf9gYSJbF9JpcX1mfOnv3/bQq94Jd/Blh+rksY7gaxNQf31UeXbQ57gxMo/khnyE0Bia/yKfFoGZ4ViwAjymHFCZJ4zqkRBw5qP+ZcdGNUMAaGIo1sEU4Do6n5s56Y+nWWoG9mbeUvHmPS9gcySTJweGMeKfyrwHRdlmoK4tYxfKi64WvcSOiEixaX/6napUcCeKDhv6DW/2BbOuwv6OvyTtV/V0PBUJtYX3yNtdAsF3T1CeMGsOU+xAsV6fxC1CzK9xoyZZCUavukAWGQAsw+Ig45aKvC4KbczzsOxEphdW3VLwGwbKMuSEAbFy2xO9JDfaERmxi0wZr5/i9Wz2EYJ95A0/0gnOhAYt26DJ4pez6tn1Ow6iSMKmfvFJwjPFXJ9vPT3swO7lO4T2hYrPsqZE0U0xaxxD/+FSsXjE=
