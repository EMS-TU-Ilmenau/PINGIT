language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: yA8pbINDGeQC+H98S18Soe5PLkY/McsG5QOxzwpAiVPNA4qU8irF2xbRr70uoAxYyS1ts8FbCWZ/zA7VERFm2rXck4cxX85wr4tLyZYFQgUrFBrhVmOoh/Qjk4tGByv72JVxr2ydIQSccirMfyzHJptsNMBe0zI0Q3NrtwGqqm5ZJ+ExXdgSTvX68jZZZEYgEIXExaLAj11oyhlLxNk6Al3tkJjr2IskOlpMo/8tpeaYeRXdzJDRiP8hQVnTjrucLWcaeoFP+uLCrAs8cyzDpz64cE4G1NzS0j98HgGjWEODD3VdEsSOiQHaS24XQ6Nqcz0/xKO+ZM1L5c1b0YoDq6bQfY9QAoNiNQlEV2Jy4ynojlHeggF8pjAd/hzo3nThosW+sGp6InnTl78TJ5SFuq9Ugnyz6DjgiU45+p1yNW6qAUhDLn8e5rl5gbC0K2hRCSRf01XixNIaV5xmH0v14c5bnKsONVJzlJoIwLFardVDS7zYFjWqBqS8MnoZJKufmxnMHY8bJ/A3a8beMOvewhOhA53PjI0C4F4pyfnWlsxHhLDp697KZgYdYcBrIlW4Ckqw3JFjvBKrSbSv+DgolSFnmxWCYvNRBe+jeKIl5s3jIalN4LOzZIihxswzk9ARpL/vjW6vPlrw7f1IFARENd7KQPp+TQntJSExQwdTaB4=
  password:
    secure: Uz39QNlVfxEKTQ/eUUyqKws2j5uj3qvfMtu5SMjlz1qAbnKyzbomwYW83egQSr6Qr6Ec4qrHUQTKB+WWTS15ZBgvJbLz5em27FTwAfqX1V/sOJCu1rk7oUJ/QP7oOJqb3qPMhJLl9/fwYs5uClPHfuhRZ4ACWyEm0mHSsFmIzKCpMcsCbIxKqHv7gI3WOthuqRksId8gf5PJ3iTj3pxibF6jTozKSuRZJ7Xx9WhUZpK+FaVriWLG8hvQ7GLv26R1/8uawJPyxjS5v2XQTSSO99UNlHYbw5KQo5anzqj4XdPiMwahYRdkJbBwFGiUrSb8nWhouQp2zNOGk4Y1Sn5JTvDg0iImKBSmCnelM+94DAl1Sj7MoDqjl9xBMULqfZgU0Jw1FU99oBmiliHLFMiJ2NEKKs29PTFbfuNcy6XOdMLr0HLGzQEaAyrg/LjVRDnzQ2j0ByaYfC6fG9Ez2Mn04xYCyuNip+OpQpZ2t0/i32fp17v57tnWxy2cGlPm5HOoDy7hU73dGtSPLpzNvOhhGuGDXxmos6VeDzlhSn7pnfmVKpSozItJtLgyOw6l7isI4enMN24TacgoJgpRngm2XoMrc1v/ukGetrf6yzhmocYL8rp7Qz3hA5ygOoCLXa21sEQ+CL4tWUUFrI2Tc1QmavfHjOAhhPQQz3aq6jOo7NE=
