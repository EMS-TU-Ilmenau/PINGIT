language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: ZYzRZ8W9Fdahe4qRCVuenizbT41/0WQv2cGZ+6IqWp5DgJF+1yJXtIH/BPS8Q/PoifhPgImRe2PbkwIKGtfhOlIN0lVlYPHvI3r4y6AdIi5f1ZIPTG9MbOeUdcKegwqnNRGbcbiyy0U/AJsJ6YzBRmpKCqbSXX2SscyvMr+BBkq6+VubiK2xIYUHtk9Qz8QPoPx8w01tL7qvfcrlBaLKDqRZvu3Uy1rjOaKdXiwcnHJKvUXxtOfDgQDaUqPFYC+9H3UGKNg5gc/TGN8n9p9bLSVhRLkfjcicw0NNUpzCB9RlIts2FxCvRcLJ5+iX2w/kqBW0iDUpKY0US/F22aP1jJ1uI5A7YVSLmzi8ULfQ75OMEUiYgY9ZVLWIdy2seCsNncQPj3an7pLLQZdzsGwLRdozORws0MD8CJSg1xoj4/rMxhsbSXdxuIvXSaTiVOeCxt77/N/WpZoRR8/RT6ep7nNRIUCnejI5sSz9mX4Z2Pl9pW9//JeRAQ+3RQ9C0avjYsuPZlBwcH+uW9PprMCSWFN4hW1MFVsq9TRFnrM7IaMUe+hBp4QVAOfmBYSeaZQoL7ri57C6SSIxgz7/7Rb5kvO4hjS+BxODBFvbyKlOVFXUKQm5LNlgZyU9eyKczvl34UcnEkvMKXmETiA2bwRVILWk4SzPKRqJg1uUPJ+IrmY=
  password:
    secure: RA9kvUhzNDInze9sQGl//pkAyyOyJj8EfLsn6teqiY8EgNGR8e2y17Ex/bWdRe0R7jGUh+iEzDuLU3ru113kznwL0qjTFSEao+w/oke3bLFXygmxZyEKppobV6y9yVbskVbVwN+hNPgvE//dn0V5s/XG6lbd3p3A8Vew++QBsbvbdac4vylWaKrzYNVkJBtQEeUxJxRdbHQOzpcmA4EVQ+c62x/NsGoAwUUoEus115XJu8vMamPOxT5Cf7ENeNcZEsbEbFvjJwEzxumTabxTNSEuCnin3XbMSwRvh/NrWyDoQHhM13h4i4lLPF4ZiMS4CCwOy6fHqjfrD/Lt0EIVn0c3wrKG3F/VQ3KM/Wo9sLKl6v7L0TBw1a2AVsX+slwQu9Mn6DDJ99nGmUMLtfwHu9AIjYYHmYXhFVaeMIHGlTvCYSScDwPVQG8F0Ui16E2BI+SwcCyMTJNuEBxee4xAYeu1FpOxjoE/YlXQ4GQKaOGKwIvVA2bN/dFCv11eUw5w5EnH7YOvizicqmapEQi1OU5xy8+E5nI3OIPLVUZ0/gfAAa/p1N2g4OoOHtlrjxDEmvJrAb/rmbg7zFeFRyVJEMgPG22Ii/njONrFyBfOCyJpCVcrG01I1yY5t+VpPNdbtHgYgiQvLjQ7/FE7Onv9eLF02RzhyYBkj3GLnb4cTJY=
