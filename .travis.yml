language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: RXz4U45i13gHmtDV8raEu+2KD98SQpPDhuIgRZAV7Lf1jkhXmDLxYxoC6ijBYV5dk3DoGNuQ8kdEAWiW/s1wGPJmSz7ER7tguZ8AEw+TusFp5x5e9OGA28AYh/lRiw8UrCs1nk4eZU16OxwIOkiWQsW1SZ4cSAEjr2vVyg2YD7B9s0xFowsEMC1rA3fFmMpL1TKe0KCyPKQJGloPGMRclejcZMIBGMwu6RG1RO2YjcGwp+o9koPqnmXeFVPMpFUqXlyvRackPSGZz14ZjdutqKdi4v/ES9OVUDXpwMNhjXAWAt2GGJUp0XXNZGxQm285cJk2FRK4fQxRvgztoZOC9vo7Ap6DjkCiN09hrnL7rnDfpCApzdjzFg29AOWkt9lPA4hNbZfI1UkbSdaMrRYxKbwdB+jHU9/hxkVrLurCjN9kIJKFpqEuQc+UCnAOKgxO9GcYKp3BLSX8nxyNKWyDBvLws9x9m/8jNUzxQhOPFSMmFHEX8ijaN7ZdkV9VaXNIEmLWlySbRWmF0HVDQkrn9dpad2N/w0d3djffzWKHjT4IWUkNpZW0T4XNhpwPIl7s6Gq/GBQG5c/wgSu3S/0MEYkqLvdW0DcMOCObiQzjM+Ubu6GjiHs2AFAZDGmUJ8lhIkQZdLrtz8Xzd8kjqyI8DlbWj2D1Vj48Dt4Kd/OJYVY=
  password:
    secure: Aglsu5/GIXIAUwWgIcsTzmkYjmad/hJCJJzJpdLbTHP9dw+kysJZlw6mQN/PvS9FeUdcfsscGQ7izxErTFnE3SpF6Y+zYSH3bNKyo00NSBhmLKp2e4QN7fugmCy9xeZEcYd1CMfNnZBD5pTP1SNAKduWIYKujJuXWnt10x3JGs5awlUmTiJt/NmIU8FpFl7k7OMDQhW9OZmcaV5C5K00DipLpcbzPvQAUG62OjUli2iU2Vinc+ULmaKx1Eh8KI6d3gFLQ2/c3kfLJR6dI3+HOrPSY1++NezknMciHPCyBie+mhwrBxgxzfhJJIy02VscqYnaZRsY/bQi6OkSou5BTcFdKHY0UmYatyC1W6MWA4ZRsBsBjZBSOI7UEimJL5kFYGFuUZDdCYGcwV4w44g07FMyJ4Q6lDpWQm+20R+3iK1EqkSJCp2bv1kRmFhfDwFkumBN3ciK6hNUvzBdmKJM9eZhccK7kdXiQhjgmtUfNQTX5ouWnTZBngDnZc6jSXQ40z20lf2L5q3b8u6udEey9K38uCn1JQEStzYQONUqpBpjtqCbv0xqi6ord9Wb0BuZy5HRoEmHhdujJDwzBSM0Vir4cty2xceiIGqIXfVn0/7pINiEiLlB7E4VPpb2WTW9NOe+HiJj96LdAftqNQvwn8nWuxx3v1Dzo2/mug3hRUs=
