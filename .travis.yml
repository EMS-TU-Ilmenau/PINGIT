language: python
os: linux
sudo: required
branches:
  only:
  - master
services:
- docker
matrix:
  include:
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: '2.7'
    if: type != pull_request
install:
- echo "$TRAVIS_BRANCH $TRAVIS_PYTHON_VERSION $PYTHON"
- |
  if [[ "$TRAVIS_BRANCH" == "stable" ]] ; then
      pip install cibuildwheel==0.9.4 twine
  else
      if [[ "$TRAVIS_PYTHON_VERSION" == "3.7" ]] ; then
          pip install coverage coveralls
      fi
  fi
script:
- pip install .
- pingit list
- pingit export -p ..
- pingit export -p .. -o ../structure.json
- pingit import -i ../structure.json -o ../import
- pingit fetch -p ..
- pingit pull --rebase -p ..
- pingit status -p ..
- pingit archive -p .. -o ../backup
- pingit archive -p .. -o ../backup --no-timestamp
- pingit archive -p .. -o ../backup --format zip
- ls -l ../*/*/*
deploy:
  provider: pypi
  skip_existing: true
  distributions: sdist bdist_wheel
  tags: true
  on:
    branch: master
    python: 3.7
  user:
    secure: ZYzRZ8W9Fdahe4qRCVuenizbT41/0WQv2cGZ+6IqWp5DgJF+1yJXtIH/BPS8Q/PoifhPgImRe2PbkwIKGtfhOlIN0lVlYPHvI3r4y6AdIi5f1ZIPTG9MbOeUdcKegwqnNRGbcbiyy0U/AJsJ6YzBRmpKCqbSXX2SscyvMr+BBkq6+VubiK2xIYUHtk9Qz8QPoPx8w01tL7qvfcrlBaLKDqRZvu3Uy1rjOaKdXiwcnHJKvUXxtOfDgQDaUqPFYC+9H3UGKNg5gc/TGN8n9p9bLSVhRLkfjcicw0NNUpzCB9RlIts2FxCvRcLJ5+iX2w/kqBW0iDUpKY0US/F22aP1jJ1uI5A7YVSLmzi8ULfQ75OMEUiYgY9ZVLWIdy2seCsNncQPj3an7pLLQZdzsGwLRdozORws0MD8CJSg1xoj4/rMxhsbSXdxuIvXSaTiVOeCxt77/N/WpZoRR8/RT6ep7nNRIUCnejI5sSz9mX4Z2Pl9pW9//JeRAQ+3RQ9C0avjYsuPZlBwcH+uW9PprMCSWFN4hW1MFVsq9TRFnrM7IaMUe+hBp4QVAOfmBYSeaZQoL7ri57C6SSIxgz7/7Rb5kvO4hjS+BxODBFvbyKlOVFXUKQm5LNlgZyU9eyKczvl34UcnEkvMKXmETiA2bwRVILWk4SzPKRqJg1uUPJ+IrmY=
  password:
    secure: MV3YiM7Us57YLN3QozFEQTD1bmIcJ89SGJX5biE6drGOTNGrbaVOWucDoH7lqkok9O9B/tgVSrnhdhTbiBKjrl4ZNGVu8Ygt7nK1gx3qY8V2kyaJFaucLjTLnFDJ1SLUMPG9ILBzdSyVRs1/hFmEJgherYncR6pR4/HSrxE+9SBVGk3He2XNbwIp7V0mDYPf6Q12PjQqavCf/0h4nz+BJXAPYVl2zeEGj3XTGU3UiOFvc0gddGrcVfMhxT+J2rk5Mj4c0kI1Gv0BXqdap9dPIesDoWvEmy7g44otgQte+0tbBXW/gt4DNPbDGugYj2TAoLTk4CorkoZn8WWTNpNk7n2zFM+74okMYaNB2F1v3W5IHWWFh09/+Rsx481JijDUpukriZql8vfQ4nChoHnpmaQTDkpDSDVg87sw3UyrwAfWYuK+cet6DG0oM1c2a4dRXSc78fJ5uRdO+HAxOzerulcphZl2NQOVlbFOVhPHrr8tg2Pyl18qa7fSTkHc9OBBWygZIdQ9+WDoV920c5P0TBiHWyx4uIOvfNWaqaCYIPB9gLoDkFPnrvAQajB04i9EhkeFX4e7dBQpAszOYu9Srf08ZM2MfpdOdnz7tPYvIjrqkLsklO280KiQTl+q94BMdN1BQAHKe0nzrXE00A0jO3E17DHN22xe9m4lJWExduc=
